## 调用文件操作系统调用

- 打开文件`open`: 返回文件描述符到%eax. 所需参数为文件名, 表示模式的数字, 权限集合
  - `%eax`: 系统调用号 5
  - `%ebx`: 文件名地址
  - `%ecx`: 读写模式
  - `%edx`: 权限
- 读文件`read`: 返回读取的字节数或错误码到%eax. 所需参数为文件描述符, 缓冲区, 缓冲区大小
  - `%eax`: 系统调用号 3
  - `%ebx`: 文件描述符
  - `%ecx`: 缓冲区地址
  - `%edx`: 缓冲区大小
- 写文件`write`:返回写入字节数或错误码到%eax. 参数和 read 一致
  - `%eax`: 系统调用号 4
  - `%ebx`: 文件描述符
  - `%ecx`: 缓冲区地址, **缓冲区已存在要写入的数据**
  - `%edx`: 缓冲区大小
- 关闭文件`close`
  - `%eax`: 系统调用号 6
  - `%ebx`: 文件描述符

## 缓冲区.bss

**缓冲区是连续的字节块, 用于批量数据传输**. 缓冲区在`section .bss`中定义.
.bss 类似.data, 但是.bss 不占用程序空间, 可以保留存储位置, 但不能进行初始化(**缓冲区并不需要初始化**). .data 可以保留存储位置, 也能设置初始值.

声明缓冲区方式如下:

```asm
.section .bss
.lcomm buffer_name, 500 # 创建500字节的缓冲区
```

使用时用`$buffer_name`, 表示立即寻址, 将 buffer_name 表示的数字作为缓冲区的起始地址.
